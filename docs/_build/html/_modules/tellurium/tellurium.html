

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tellurium.tellurium &mdash; tellurium 1.3.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="tellurium 1.3.0 documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> tellurium
          

          
          </a>

          
            
            
              <div class="version">
                1.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tellurium_methods.html">Tellurium Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_apidoc/tellurium.html">API (tellurium)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">tellurium</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>tellurium.tellurium</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for tellurium.tellurium</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The module tellurium provides support routines.</span>
<span class="sd">As part of this module an ExendedRoadRunner class is defined which provides helper methods for</span>
<span class="sd">model export, plotting or the Jarnac compatibility layer.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">division</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">roadrunner</span>
<span class="kn">import</span> <span class="nn">antimony</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">tephrasedml</span>


<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">libsbml</span>
<span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">libsbml</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">LOG_WARNING</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;libsbml&#39; could not be imported&quot;</span><span class="p">,</span> <span class="ne">ImportWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">libsedml</span>
<span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">libsedml</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">LOG_WARNING</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;libsedml&#39; could not be imported&quot;</span><span class="p">,</span> <span class="ne">ImportWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">phrasedml</span>
<span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">phrasedml</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">LOG_WARNING</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;phrasedml&#39; could not be imported&quot;</span><span class="p">,</span> <span class="ne">ImportWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">sbml2matlab</span> <span class="kn">import</span> <span class="n">sbml2matlab</span>
<span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">sbml2matlab</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">LOG_WARNING</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sbml2matlab&#39; could not be imported&quot;</span><span class="p">,</span> <span class="ne">ImportWarning</span><span class="p">)</span>

<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># plot hold</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># FIXME: What is this? Add some explanation of the tehold global parameter.</span>
<span class="c1"># why global parameter? this is really bad style.</span>

<span class="n">tehold</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># Same as matlab hold</span>

<span class="c1"># For some reason we can only access the tehold variable via methods</span>
<div class="viewcode-block" id="setHold"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.setHold">[docs]</a><span class="k">def</span> <span class="nf">setHold</span><span class="p">(</span><span class="n">myHold</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">tehold</span>    
    <span class="n">tehold</span> <span class="o">=</span> <span class="n">myHold</span></div>


<div class="viewcode-block" id="getHold"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.getHold">[docs]</a><span class="k">def</span> <span class="nf">getHold</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">tehold</span>
    <span class="k">return</span> <span class="n">tehold</span></div>


<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># group: utility</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="getVersionInfo"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.getVersionInfo">[docs]</a><span class="k">def</span> <span class="nf">getVersionInfo</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Returns version information for tellurium included packages.</span>

<span class="sd">    :returns: list of tuples (package, version)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">versions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;tellurium&#39;</span><span class="p">,</span> <span class="n">getTelluriumVersion</span><span class="p">()),</span>
        <span class="p">(</span><span class="s1">&#39;roadrunner&#39;</span><span class="p">,</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">__version__</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;antimony&#39;</span><span class="p">,</span> <span class="n">antimony</span><span class="o">.</span><span class="n">__version__</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;snbw_viewer&#39;</span><span class="p">,</span> <span class="s1">&#39;No information for sbnw viewer&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="n">libsbml</span><span class="p">:</span>
        <span class="n">versions</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;libsbml&#39;</span><span class="p">,</span> <span class="n">libsbml</span><span class="o">.</span><span class="n">getLibSBMLDottedVersion</span><span class="p">()))</span>
    <span class="k">if</span> <span class="n">libsedml</span><span class="p">:</span>
        <span class="n">versions</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;libsedml&#39;</span><span class="p">,</span> <span class="n">libsedml</span><span class="o">.</span><span class="n">getLibSEDMLVersionString</span><span class="p">()))</span>
    <span class="k">if</span> <span class="n">phrasedml</span><span class="p">:</span>
        <span class="n">versions</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;phrasedml&#39;</span><span class="p">,</span> <span class="n">phrasedml</span><span class="o">.</span><span class="n">__version__</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">versions</span></div>


<div class="viewcode-block" id="printVersionInfo"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.printVersionInfo">[docs]</a><span class="k">def</span> <span class="nf">printVersionInfo</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Prints version information for tellurium included packages.</span>

<span class="sd">    see also: :func:`getVersionInfo`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">versions</span> <span class="o">=</span> <span class="n">getVersionInfo</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">versions</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span></div>


<div class="viewcode-block" id="getTelluriumVersion"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.getTelluriumVersion">[docs]</a><span class="k">def</span> <span class="nf">getTelluriumVersion</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Version number of tellurium.</span>

<span class="sd">    :returns: version</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="s1">&#39;..&#39;</span><span class="p">,</span> <span class="s1">&#39;VERSION.txt&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">version</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">version</span></div>


<div class="viewcode-block" id="noticesOff"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.noticesOff">[docs]</a><span class="k">def</span> <span class="nf">noticesOff</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Switch off the generation of notices to the user.</span>
<span class="sd">    Call this to stop roadrunner from printing warning message to the console.</span>

<span class="sd">    See also :func:`noticesOn`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">LOG_WARNING</span><span class="p">)</span></div>


<div class="viewcode-block" id="noticesOn"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.noticesOn">[docs]</a><span class="k">def</span> <span class="nf">noticesOn</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; Switch on notice generation to the user.</span>

<span class="sd">    See also :func:`noticesOff`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">roadrunner</span><span class="o">.</span><span class="n">Logger</span><span class="o">.</span><span class="n">LOG_NOTICE</span><span class="p">)</span></div>
    

<div class="viewcode-block" id="saveToFile"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.saveToFile">[docs]</a><span class="k">def</span> <span class="nf">saveToFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Save string to file.</span>

<span class="sd">    see also: :func:`readFromFile`</span>

<span class="sd">    :param filePath: file path to save to</span>
<span class="sd">    :param str: string to save</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span></div>


<div class="viewcode-block" id="readFromFile"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.readFromFile">[docs]</a><span class="k">def</span> <span class="nf">readFromFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Load a file and return contents as a string.</span>

<span class="sd">    see also: :func:`saveToFile`</span>

<span class="sd">    :param filePath: file path to read from</span>
<span class="sd">    :returns: string representation of the contents of the file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">string</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">string</span></div>


<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># Loading Models Methods</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<span class="k">def</span> <span class="nf">_checkAntimonyReturnCode</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Helper for checking the antimony response code.</span>
<span class="sd">    Raises Exception if error in antimony.</span>

<span class="sd">    :param code: antimony response</span>
<span class="sd">    :type code: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">code</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Antimony: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">antimony</span><span class="o">.</span><span class="n">getLastError</span><span class="p">()))</span>


<div class="viewcode-block" id="loada"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.loada">[docs]</a><span class="k">def</span> <span class="nf">loada</span><span class="p">(</span><span class="n">ant</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Load model from Antimony string.</span>

<span class="sd">    See also: :func:`loadAntimonyModel`</span>
<span class="sd">    ::</span>
<span class="sd">        r = te.loada(&#39;S1 -&gt; S2; k1*S1; k1 = 0.1; S2 = 10&#39;)</span>

<span class="sd">    :param ant: Antimony model</span>
<span class="sd">    :type ant: str | file</span>
<span class="sd">    :returns: RoadRunner instance with model loaded</span>
<span class="sd">    :rtype: roadrunner.RoadRunner</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">loadAntimonyModel</span><span class="p">(</span><span class="n">ant</span><span class="p">)</span></div>


<div class="viewcode-block" id="loadAntimonyModel"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.loadAntimonyModel">[docs]</a><span class="k">def</span> <span class="nf">loadAntimonyModel</span><span class="p">(</span><span class="n">ant</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Load Antimony model with tellurium.</span>

<span class="sd">    See also: :func:`loada`</span>

<span class="sd">    :param ant: Antimony model</span>
<span class="sd">    :type ant: str | file</span>
<span class="sd">    :returns: RoadRunner instance with model loaded</span>
<span class="sd">    :rtype: roadrunner.RoadRunner</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sbml</span> <span class="o">=</span> <span class="n">antimonyToSBML</span><span class="p">(</span><span class="n">ant</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">RoadRunner</span><span class="p">(</span><span class="n">sbml</span><span class="p">)</span></div>


<div class="viewcode-block" id="loadSBMLModel"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.loadSBMLModel">[docs]</a><span class="k">def</span> <span class="nf">loadSBMLModel</span><span class="p">(</span><span class="n">sbml</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load SBML model with tellurium</span>

<span class="sd">    :param sbml: SBML model</span>
<span class="sd">    :type sbml: str | file</span>
<span class="sd">    :returns: RoadRunner instance with model loaded</span>
<span class="sd">    :rtype: roadrunner.RoadRunner</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">RoadRunner</span><span class="p">(</span><span class="n">sbml</span><span class="p">)</span></div>


<div class="viewcode-block" id="loadCellMLModel"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.loadCellMLModel">[docs]</a><span class="k">def</span> <span class="nf">loadCellMLModel</span><span class="p">(</span><span class="n">cellml</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Load CellML model with tellurium.</span>

<span class="sd">    :param cellml: CellML model</span>
<span class="sd">    :type cellml: str | file</span>
<span class="sd">    :returns: RoadRunner instance with model loaded</span>
<span class="sd">    :rtype: roadrunner.RoadRunner</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sbml</span> <span class="o">=</span> <span class="n">cellmlToSBML</span><span class="p">(</span><span class="n">cellml</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">RoadRunner</span><span class="p">(</span><span class="n">sbml</span><span class="p">)</span></div>


<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># Interconversion Methods</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="antimonyTosbml"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.antimonyTosbml">[docs]</a><span class="k">def</span> <span class="nf">antimonyTosbml</span><span class="p">(</span><span class="n">ant</span><span class="p">):</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;antimonyTosbml&#39; is deprecated. Use &#39;antimonyToSBML&#39; instead. Will be removed in tellurium v1.4&quot;</span><span class="p">,</span>
                  <span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">antimonyToSBML</span><span class="p">(</span><span class="n">ant</span><span class="p">)</span></div>


<div class="viewcode-block" id="antimonyToSBML"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.antimonyToSBML">[docs]</a><span class="k">def</span> <span class="nf">antimonyToSBML</span><span class="p">(</span><span class="n">ant</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Convert Antimony to SBML string.</span>

<span class="sd">    :param ant: Antimony string or file</span>
<span class="sd">    :type ant: str | file</span>
<span class="sd">    :return: SBML</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">ant</span><span class="p">):</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadAntimonyFile</span><span class="p">(</span><span class="n">ant</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadAntimonyString</span><span class="p">(</span><span class="n">ant</span><span class="p">)</span>
    <span class="n">_checkAntimonyReturnCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="n">mid</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">getMainModuleName</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">antimony</span><span class="o">.</span><span class="n">getSBMLString</span><span class="p">(</span><span class="n">mid</span><span class="p">)</span></div>


<div class="viewcode-block" id="antimonyToCellML"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.antimonyToCellML">[docs]</a><span class="k">def</span> <span class="nf">antimonyToCellML</span><span class="p">(</span><span class="n">ant</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Convert Antimony to CellML string.</span>

<span class="sd">    :param ant: Antimony string or file</span>
<span class="sd">    :type ant: str | file</span>
<span class="sd">    :return: CellML</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">ant</span><span class="p">):</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadAntimonyFile</span><span class="p">(</span><span class="n">ant</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadAntimonyString</span><span class="p">(</span><span class="n">ant</span><span class="p">)</span>
    <span class="n">_checkAntimonyReturnCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="n">mid</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">getMainModuleName</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">antimony</span><span class="o">.</span><span class="n">getCellMLString</span><span class="p">(</span><span class="n">mid</span><span class="p">)</span></div>


<div class="viewcode-block" id="sbmlToAntimony"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.sbmlToAntimony">[docs]</a><span class="k">def</span> <span class="nf">sbmlToAntimony</span><span class="p">(</span><span class="n">sbml</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Convert SBML to antimony string.</span>

<span class="sd">    :param sbml: SBML string or file</span>
<span class="sd">    :type sbml: str | file</span>
<span class="sd">    :return: Antimony</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">sbml</span><span class="p">):</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadSBMLFile</span><span class="p">(</span><span class="n">sbml</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadSBMLString</span><span class="p">(</span><span class="n">sbml</span><span class="p">)</span>
    <span class="n">_checkAntimonyReturnCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">antimony</span><span class="o">.</span><span class="n">getAntimonyString</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span></div>


<div class="viewcode-block" id="sbmlToCellML"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.sbmlToCellML">[docs]</a><span class="k">def</span> <span class="nf">sbmlToCellML</span><span class="p">(</span><span class="n">sbml</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Convert SBML to CellML string.</span>

<span class="sd">    :param sbml: SBML string or file</span>
<span class="sd">    :type sbml: str | file</span>
<span class="sd">    :return: CellML</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">sbml</span><span class="p">):</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadSBMLFile</span><span class="p">(</span><span class="n">sbml</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadSBMLString</span><span class="p">(</span><span class="n">sbml</span><span class="p">)</span>
    <span class="n">_checkAntimonyReturnCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">antimony</span><span class="o">.</span><span class="n">getCellMLString</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span></div>


<div class="viewcode-block" id="cellmlToAntimony"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.cellmlToAntimony">[docs]</a><span class="k">def</span> <span class="nf">cellmlToAntimony</span><span class="p">(</span><span class="n">cellml</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Convert CellML to antimony string.</span>

<span class="sd">    :param cellml: CellML string or file</span>
<span class="sd">    :type cellml: str | file</span>
<span class="sd">    :return: antimony</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">cellml</span><span class="p">):</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadCellMLFile</span><span class="p">(</span><span class="n">cellml</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadCellMLString</span><span class="p">(</span><span class="n">cellml</span><span class="p">)</span>
    <span class="n">_checkAntimonyReturnCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">antimony</span><span class="o">.</span><span class="n">getAntimonyString</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span></div>


<div class="viewcode-block" id="cellmlToSBML"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.cellmlToSBML">[docs]</a><span class="k">def</span> <span class="nf">cellmlToSBML</span><span class="p">(</span><span class="n">cellml</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Convert CellML to SBML string.</span>

<span class="sd">    :param cellml: CellML string or file</span>
<span class="sd">    :type cellml: str | file</span>
<span class="sd">    :return: SBML</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">cellml</span><span class="p">):</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadCellMLFile</span><span class="p">(</span><span class="n">cellml</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">antimony</span><span class="o">.</span><span class="n">loadCellMLString</span><span class="p">(</span><span class="n">cellml</span><span class="p">)</span>
    <span class="n">_checkAntimonyReturnCode</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">antimony</span><span class="o">.</span><span class="n">getSBMLString</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span></div>


<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># SEDML Utilities</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="experiment"><a class="viewcode-back" href="../../notebooks.html#tellurium.tellurium.experiment">[docs]</a><span class="k">def</span> <span class="nf">experiment</span><span class="p">(</span><span class="n">ant</span><span class="p">,</span> <span class="n">phrasedml</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Create experiment from antimony and phrasedml string.</span>

<span class="sd">    :param ant: Antimony string of model</span>
<span class="sd">    :type ant: str</span>
<span class="sd">    :param phrasedml: phrasedml simulation description</span>
<span class="sd">    :type phrasedml: str</span>
<span class="sd">    :returns: SEDML experiment description</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">tephrasedml</span><span class="o">.</span><span class="n">tePhrasedml</span><span class="p">(</span><span class="n">ant</span><span class="p">,</span> <span class="n">phrasedml</span><span class="p">)</span></div>


<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># Math Utilities</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="getEigenvalues"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.getEigenvalues">[docs]</a><span class="k">def</span> <span class="nf">getEigenvalues</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Eigenvalues of matrix.</span>

<span class="sd">    Convenience method for computing the eigenvalues of a matrix m</span>
<span class="sd">    Uses numpy eig to compute the eigenvalues.</span>

<span class="sd">    :param m: numpy array</span>
<span class="sd">    :returns: numpy array containing eigenvalues</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">linalg</span>
    <span class="n">w</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">linalg</span><span class="o">.</span><span class="n">eig</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">w</span></div>


<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># Plotting Utilities</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="plotArray"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.plotArray">[docs]</a><span class="k">def</span> <span class="nf">plotArray</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Plot an array.</span>

<span class="sd">    The first column of the array will be the x-axis and remaining columns the y-axis. Returns</span>
<span class="sd">    a handle to the plotting object. Note that you can add</span>
<span class="sd">    plotting options as named key values after the array.</span>
<span class="sd">    For example to add a legend, include the label key value:</span>
<span class="sd">    te.plotArray (m, label=&#39;A label&#39;) then use pylab.legend()</span>
<span class="sd">    to make sure the legend is shown.</span>
<span class="sd">    ::</span>

<span class="sd">        import numpy as np</span>
<span class="sd">        result = np.array([[1,2,3], [7.2,6.5,8.8], [9.8, 6.5, 4.3]])</span>
<span class="sd">        te.plotArray(result)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">tehold</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][:,</span> <span class="mi">1</span><span class="p">:],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># If user is building a legend don&#39;t show the plot yet</span>
    <span class="k">if</span> <span class="s1">&#39;label&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">p</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tehold</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">p</span></div>


<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># Test Models</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="loadTestModel"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.loadTestModel">[docs]</a><span class="k">def</span> <span class="nf">loadTestModel</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Loads particular test model into roadrunner.</span>
<span class="sd">    ::</span>

<span class="sd">        rr = te.loadTestModel(&#39;feedback.xml&#39;)</span>

<span class="sd">    :returns: RoadRunner instance with test model loaded</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">roadrunner.testing</span>
    <span class="k">return</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">getRoadRunner</span><span class="p">(</span><span class="n">string</span><span class="p">)</span></div>


<div class="viewcode-block" id="getTestModel"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.getTestModel">[docs]</a><span class="k">def</span> <span class="nf">getTestModel</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;SBML of given test model as a string.</span>
<span class="sd">    ::</span>

<span class="sd">        # load test model as SBML</span>
<span class="sd">        sbml = te.getTestModel(&#39;feedback.xml&#39;)</span>
<span class="sd">        r = te.loadSBMLModel(sbml)</span>
<span class="sd">        # simulate</span>
<span class="sd">        r.simulate(0, 100, 20)</span>

<span class="sd">    :returns: SBML string of test model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">roadrunner.testing</span>
    <span class="k">return</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">getData</span><span class="p">(</span><span class="n">string</span><span class="p">)</span></div>


<div class="viewcode-block" id="listTestModels"><a class="viewcode-back" href="../../tellurium_methods.html#tellurium.tellurium.listTestModels">[docs]</a><span class="k">def</span> <span class="nf">listTestModels</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; List roadrunner SBML test models.</span>
<span class="sd">    ::</span>

<span class="sd">        print(te.listTestModels())</span>

<span class="sd">    :returns: list of test model paths</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">roadrunner.testing</span>
    <span class="n">modelList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">fileList</span> <span class="o">=</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">dir</span><span class="p">(</span><span class="s1">&#39;*.xml&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">pathName</span> <span class="ow">in</span> <span class="n">fileList</span><span class="p">:</span>
        <span class="n">modelList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">pathName</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">modelList</span></div>

<span class="c1"># ---------------------------------------------------------------------</span>
<span class="c1"># Extended RoadRunner class</span>
<span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="ExtendedRoadRunner"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner">[docs]</a><span class="k">class</span> <span class="nc">ExtendedRoadRunner</span><span class="p">(</span><span class="n">roadrunner</span><span class="o">.</span><span class="n">RoadRunner</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ExtendedRoadRunner</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># ---------------------------------------------------------------------</span>
    <span class="c1"># Model access</span>
    <span class="c1"># ---------------------------------------------------------------------</span>
    <span class="c1"># def getBoundarySpeciesConcentrations(self):</span>
    <span class="c1">#     return self.model.getBoundarySpeciesConcentrations()</span>
    <span class="c1"># getBoundarySpeciesConcentrations.__doc__ = roadrunner.ExecutableModel.getBoundarySpeciesConcentrations.__doc__</span>

    <span class="c1"># These model functions are attached after class creation</span>
    <span class="n">_model_functions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;getBoundarySpeciesConcentrations&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getBoundarySpeciesConcentrations&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getBoundarySpeciesIds&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumBoundarySpecies&#39;</span><span class="p">,</span>

        <span class="s1">&#39;getFloatingSpeciesConcentrations&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getFloatingSpeciesIds&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumFloatingSpecies&#39;</span><span class="p">,</span>

        <span class="s1">&#39;getGlobalParameterIds&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getGlobalParameterValues&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumGlobalParameters&#39;</span><span class="p">,</span>

        <span class="s1">&#39;getCompartmentIds&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getCompartmentVolumes&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumCompartments&#39;</span><span class="p">,</span>

        <span class="s1">&#39;getConservedMoietyValues&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumConservedMoieties&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumDepFloatingSpecies&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumIndFloatingSpecies&#39;</span><span class="p">,</span>

        <span class="s1">&#39;getReactionIds&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getReactionRates&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumReactions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumEvents&#39;</span><span class="p">,</span>
        <span class="s1">&#39;getNumRateRules&#39;</span>
     <span class="p">]</span>

    <span class="c1"># ---------------------------------------------------------------------</span>
    <span class="c1"># Jarnac compatibility layer</span>
    <span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="ExtendedRoadRunner.fjac"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.fjac">[docs]</a>    <span class="k">def</span> <span class="nf">fjac</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFullJacobian</span><span class="p">()</span></div>
    <span class="n">fjac</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">RoadRunner</span><span class="o">.</span><span class="n">getFullJacobian</span><span class="o">.</span><span class="n">__doc__</span>

<div class="viewcode-block" id="ExtendedRoadRunner.sm"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.sm">[docs]</a>    <span class="k">def</span> <span class="nf">sm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFullStoichiometryMatrix</span><span class="p">()</span></div>
    <span class="n">sm</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">RoadRunner</span><span class="o">.</span><span class="n">getFullStoichiometryMatrix</span><span class="o">.</span><span class="n">__doc__</span>

<div class="viewcode-block" id="ExtendedRoadRunner.rs"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.rs">[docs]</a>    <span class="k">def</span> <span class="nf">rs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getReactionIds</span><span class="p">()</span></div>
    <span class="n">rs</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">ExecutableModel</span><span class="o">.</span><span class="n">getReactionIds</span><span class="o">.</span><span class="n">__doc__</span>

<div class="viewcode-block" id="ExtendedRoadRunner.fs"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.fs">[docs]</a>    <span class="k">def</span> <span class="nf">fs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getFloatingSpeciesIds</span><span class="p">()</span></div>
    <span class="n">fs</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">ExecutableModel</span><span class="o">.</span><span class="n">getFloatingSpeciesIds</span><span class="o">.</span><span class="n">__doc__</span>

<div class="viewcode-block" id="ExtendedRoadRunner.bs"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.bs">[docs]</a>    <span class="k">def</span> <span class="nf">bs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getBoundarySpeciesIds</span><span class="p">()</span></div>
    <span class="n">bs</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">ExecutableModel</span><span class="o">.</span><span class="n">getBoundarySpeciesIds</span><span class="o">.</span><span class="n">__doc__</span>

<div class="viewcode-block" id="ExtendedRoadRunner.ps"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.ps">[docs]</a>    <span class="k">def</span> <span class="nf">ps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getGlobalParameterIds</span><span class="p">()</span></div>
    <span class="n">ps</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">ExecutableModel</span><span class="o">.</span><span class="n">getGlobalParameterIds</span><span class="o">.</span><span class="n">__doc__</span>

<div class="viewcode-block" id="ExtendedRoadRunner.vs"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.vs">[docs]</a>    <span class="k">def</span> <span class="nf">vs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getCompartmentIds</span><span class="p">()</span></div>
    <span class="n">vs</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">ExecutableModel</span><span class="o">.</span><span class="n">getCompartmentIds</span><span class="o">.</span><span class="n">__doc__</span>

<div class="viewcode-block" id="ExtendedRoadRunner.dv"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.dv">[docs]</a>    <span class="k">def</span> <span class="nf">dv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getStateVectorRate</span><span class="p">()</span></div>
    <span class="n">dv</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">ExecutableModel</span><span class="o">.</span><span class="n">getStateVector</span><span class="o">.</span><span class="n">__doc__</span>

<div class="viewcode-block" id="ExtendedRoadRunner.rv"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.rv">[docs]</a>    <span class="k">def</span> <span class="nf">rv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getReactionRates</span><span class="p">()</span></div>
    <span class="n">rv</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">ExecutableModel</span><span class="o">.</span><span class="n">getReactionRates</span><span class="o">.</span><span class="n">__doc__</span>

<div class="viewcode-block" id="ExtendedRoadRunner.sv"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.sv">[docs]</a>    <span class="k">def</span> <span class="nf">sv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getFloatingSpeciesConcentrations</span><span class="p">()</span></div>
    <span class="n">sv</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">roadrunner</span><span class="o">.</span><span class="n">ExecutableModel</span><span class="o">.</span><span class="n">getFloatingSpeciesConcentrations</span><span class="o">.</span><span class="n">__doc__</span>

    <span class="c1"># ---------------------------------------------------------------------</span>
    <span class="c1"># Export Utilities</span>
    <span class="c1"># ---------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__getSBML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">current</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurrentSBML</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSBML</span><span class="p">()</span>

<div class="viewcode-block" id="ExtendedRoadRunner.getAntimony"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.getAntimony">[docs]</a>    <span class="k">def</span> <span class="nf">getAntimony</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Antimony string of the original model loaded into roadrunner.</span>

<span class="sd">        :param current: return current model state</span>
<span class="sd">        :type current: bool</span>
<span class="sd">        :return: Antimony</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sbml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getSBML</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sbmlToAntimony</span><span class="p">(</span><span class="n">sbml</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.getCurrentAntimony"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.getCurrentAntimony">[docs]</a>    <span class="k">def</span> <span class="nf">getCurrentAntimony</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Antimony string of the current model state.</span>

<span class="sd">        See also: :func:`getAntimony`</span>
<span class="sd">        :return: Antimony</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAntimony</span><span class="p">(</span><span class="n">current</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.getCellML"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.getCellML">[docs]</a>    <span class="k">def</span> <span class="nf">getCellML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; CellML string of the original model loaded into roadrunner.</span>

<span class="sd">        :param current: return current model state</span>
<span class="sd">        :type current: bool</span>
<span class="sd">        :returns: CellML string</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sbml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getSBML</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sbmlToCellML</span><span class="p">(</span><span class="n">sbml</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.getCurrentCellML"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.getCurrentCellML">[docs]</a>    <span class="k">def</span> <span class="nf">getCurrentCellML</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; CellML string of current model state.</span>

<span class="sd">        See also: :func:`getCellML`</span>
<span class="sd">        :returns: CellML string</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCellML</span><span class="p">(</span><span class="n">current</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.getMatlab"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.getMatlab">[docs]</a>    <span class="k">def</span> <span class="nf">getMatlab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Matlab string of the original model loaded into roadrunner.</span>

<span class="sd">        See also: :func:`getCurrentMatlab`</span>
<span class="sd">        :returns: Matlab string</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sbml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getSBML</span><span class="p">(</span><span class="n">current</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sbml2matlab</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">sbml2matlab</span><span class="p">(</span><span class="n">sbml</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sbml2matlab&#39; could not be imported, no support for Matlab code generation&quot;</span><span class="p">,</span>
                          <span class="ne">RuntimeWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.getCurrentMatlab"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.getCurrentMatlab">[docs]</a>    <span class="k">def</span> <span class="nf">getCurrentMatlab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Matlab string of current model state.</span>

<span class="sd">        :param current: return current model state</span>
<span class="sd">        :type current: bool</span>
<span class="sd">        :returns: Matlab string</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMatlab</span><span class="p">(</span><span class="n">current</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.exportToSBML"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.exportToSBML">[docs]</a>    <span class="k">def</span> <span class="nf">exportToSBML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">current</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Save current model as SBML file.</span>

<span class="sd">        :param current: export current model state</span>
<span class="sd">        :type current: bool</span>
<span class="sd">        :param filePath: file path of SBML file</span>
<span class="sd">        :type filePath: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">saveToFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getSBML</span><span class="p">(</span><span class="n">current</span><span class="p">))</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.exportToAntimony"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.exportToAntimony">[docs]</a>    <span class="k">def</span> <span class="nf">exportToAntimony</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">current</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Save current model as Antimony file.</span>

<span class="sd">        :param current: export current model state</span>
<span class="sd">        :type current: bool</span>
<span class="sd">        :param filePath: file path of Antimony file</span>
<span class="sd">        :type filePath: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">saveToFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAntimony</span><span class="p">(</span><span class="n">current</span><span class="p">))</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.exportToCellML"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.exportToCellML">[docs]</a>    <span class="k">def</span> <span class="nf">exportToCellML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">current</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Save current model as CellML file.</span>

<span class="sd">        :param current: export current model state</span>
<span class="sd">        :type current: bool</span>
<span class="sd">        :param filePath: file path of CellML file</span>
<span class="sd">        :type filePath: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">saveToFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCellML</span><span class="p">(</span><span class="n">current</span><span class="p">))</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.exportToMatlab"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.exportToMatlab">[docs]</a>    <span class="k">def</span> <span class="nf">exportToMatlab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">current</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Save current model as Matlab file.</span>
<span class="sd">        To save the original model loaded into roadrunner use</span>
<span class="sd">        current=False.</span>

<span class="sd">        :param self: RoadRunner instance</span>
<span class="sd">        :type self: RoadRunner.roadrunner</span>
<span class="sd">        :param filePath: file path of Matlab file</span>
<span class="sd">        :type filePath: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">saveToFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMatlab</span><span class="p">(</span><span class="n">current</span><span class="p">))</span></div>

    <span class="c1"># ---------------------------------------------------------------------</span>
    <span class="c1"># Reset Methods</span>
    <span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="ExtendedRoadRunner.resetToOrigin"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.resetToOrigin">[docs]</a>    <span class="k">def</span> <span class="nf">resetToOrigin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reset model to state when first loaded.</span>

<span class="sd">        This resets the model back to the state when it was FIRST loaded,</span>
<span class="sd">        this includes all init() and parameters such as k1 etc.</span>

<span class="sd">        identical to:</span>
<span class="sd">            r.reset(roadrunner.SelectionRecord.ALL)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">roadrunner</span><span class="o">.</span><span class="n">SelectionRecord</span><span class="o">.</span><span class="n">ALL</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.resetAll"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.resetAll">[docs]</a>    <span class="k">def</span> <span class="nf">resetAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Reset all model variables to CURRENT init(X) values.</span>

<span class="sd">        This resets all variables, S1, S2 etc to the CURRENT init(X) values. It also resets all</span>
<span class="sd">        parameters back to the values they had when the model was first loaded.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">roadrunner</span><span class="o">.</span><span class="n">SelectionRecord</span><span class="o">.</span><span class="n">TIME</span> <span class="o">|</span>
                   <span class="n">roadrunner</span><span class="o">.</span><span class="n">SelectionRecord</span><span class="o">.</span><span class="n">RATE</span> <span class="o">|</span>
                   <span class="n">roadrunner</span><span class="o">.</span><span class="n">SelectionRecord</span><span class="o">.</span><span class="n">FLOATING</span> <span class="o">|</span>
                   <span class="n">roadrunner</span><span class="o">.</span><span class="n">SelectionRecord</span><span class="o">.</span><span class="n">GLOBAL_PARAMETER</span><span class="p">)</span></div>

    <span class="c1"># ---------------------------------------------------------------------</span>
    <span class="c1"># Routines flattened from model, aves typing and easier finding of methods</span>
    <span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="ExtendedRoadRunner.getRatesOfChange"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.getRatesOfChange">[docs]</a>    <span class="k">def</span> <span class="nf">getRatesOfChange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Rate of change of all state variables in the model.</span>

<span class="sd">        :returns: rate of change of all state variables (eg species) in the model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">conservedMoietyAnalysis</span><span class="p">:</span>
            <span class="n">m1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLinkMatrix</span><span class="p">()</span>
            <span class="n">m2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getStateVectorRate</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">m1</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getStateVectorRate</span><span class="p">()</span></div>

    <span class="c1"># def getConservedMoietyIds(self):</span>
    <span class="c1">#     warnings.warn(&#39;Use getDependentFloatingSpecies instead, will be removed in v1.4&#39;,</span>
    <span class="c1">#                   DeprecationWarning, stacklevel=2)</span>
    <span class="c1">#     return self.getDependentFloatingSpecies()</span>

    <span class="c1"># ---------------------------------------------------------------------</span>
    <span class="c1"># Plotting Utilities</span>
    <span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="ExtendedRoadRunner.draw"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Draws an SBMLDiagram of the current model.</span>
<span class="sd">        To set the width of the output plot provide the &#39;width&#39; argument.</span>
<span class="sd">        Species are drawn as white circles (boundary species</span>
<span class="sd">        shaded in blue), reactions as grey squares.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">visualization.sbmldiagram</span> <span class="kn">import</span> <span class="n">SBMLDiagram</span>
        <span class="n">diagram</span> <span class="o">=</span> <span class="n">SBMLDiagram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getSBML</span><span class="p">())</span>
        <span class="n">diagram</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.plot"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
             <span class="n">xlabel</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">xlim</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ylim</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plot data generated by a simulation.</span>
<span class="sd">        Plot results from a simulation carried out by the simulate or gillespie</span>
<span class="sd">        functions. This is a roadrunner method.</span>
<span class="sd">        Data is a numpy array where the first column is considered the x axis and all remaining columns the y axis.</span>
<span class="sd">        If no data is provided the data currently held by roadrunner generated in the last simulation is used.</span>

<span class="sd">        Curves are plotted in order of selection (columns in result)</span>

<span class="sd">        Supports all matplotlib.pyplot.plot keyword arguments, like</span>
<span class="sd">            color</span>
<span class="sd">            alpha</span>
<span class="sd">            linewidth</span>
<span class="sd">            linestyle</span>
<span class="sd">            marker</span>
<span class="sd">        ::</span>

<span class="sd">            sbml = te.getTestModel(&#39;feedback.xml&#39;)</span>
<span class="sd">            r = te.loadSBMLModel(sbml)</span>
<span class="sd">            s = r.simulate(0, 100, 201)</span>
<span class="sd">            r.plot(s, loc=&quot;upper right&quot;, linewidth=2.0, lineStyle=&#39;-&#39;, marker=&#39;o&#39;, markersize=2.0, alpha=0.8,</span>
<span class="sd">                   title=&quot;Feedback Oscillation&quot;, xlabel=&quot;time&quot;, ylabel=&quot;concentration&quot;, xlim=[0,100], ylim=[-1, 4])</span>

<span class="sd">        :param result: results data to plot</span>
<span class="sd">        :param loc: location of plot legend</span>
<span class="sd">        :param show: show the plot</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSimulationData</span><span class="p">()</span>

        <span class="k">if</span> <span class="s1">&#39;linewidth&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2.0</span>

        <span class="c1"># get the names</span>
        <span class="n">names</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">names</span>
        <span class="k">if</span> <span class="n">names</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selections</span>

        <span class="c1"># make plot</span>
        <span class="n">Ncol</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="n">Ncol</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Legend names must match result array&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Ncol</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">loc</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># no labels if no legend</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">result</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">result</span><span class="p">[:,</span> <span class="n">k</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">result</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">result</span><span class="p">[:,</span> <span class="n">k</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">names</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s1">&#39;Blues&#39;</span><span class="p">)</span>

        <span class="c1"># labels</span>
        <span class="k">if</span> <span class="n">xlabel</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">xlabel</span> <span class="o">=</span> <span class="n">names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ylabel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">xlim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">xlim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ylim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="n">ylim</span><span class="p">)</span>

        <span class="c1"># show legend</span>
        <span class="k">if</span> <span class="n">loc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">loc</span><span class="p">)</span>
        <span class="c1"># show plot</span>
        <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">plt</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.plotWithLegend"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.plotWithLegend">[docs]</a>    <span class="k">def</span> <span class="nf">plotWithLegend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;plotWithLegend&#39; is deprecated. Use &#39;plot&#39; instead. Will be removed in tellurium v1.4&quot;</span><span class="p">,</span>
                      <span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="n">loc</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="n">show</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.simulateAndPlot"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.simulateAndPlot">[docs]</a>    <span class="k">def</span> <span class="nf">simulateAndPlot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Run simulation and plot the results.</span>

<span class="sd">        :param start: start time of simulation</span>
<span class="sd">        :param end: end time of simulation</span>
<span class="sd">        :param points: number of points in simulation</span>
<span class="sd">        :returns: simulation results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;simulateAndPlot&#39; is deprecated. Use the &#39;simulate&#39; followed by &#39;plot&#39; instead. &quot;</span> <span class="o">+</span>
                      <span class="s2">&quot;Will be removed in tellurium v1.4&quot;</span><span class="p">,</span>
                      <span class="ne">DeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

    <span class="c1"># ---------------------------------------------------------------------</span>
    <span class="c1"># Stochastic Simulation Methods</span>
    <span class="c1"># ---------------------------------------------------------------------</span>
<div class="viewcode-block" id="ExtendedRoadRunner.getSeed"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.getSeed">[docs]</a>    <span class="k">def</span> <span class="nf">getSeed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">integratorName</span><span class="o">=</span><span class="s2">&quot;gillespie&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Current seed used by the integrator with integratorName.</span>
<span class="sd">        Defaults to the seed of the gillespie integrator.</span>

<span class="sd">        :param integratorName: name of the integrator for which the seed should be retured</span>
<span class="sd">        :type integratorName: str</span>
<span class="sd">        :returns: current seed</span>
<span class="sd">        :rtype: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">integrator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getIntegratorByName</span><span class="p">(</span><span class="n">integratorName</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">integrator</span><span class="o">.</span><span class="n">getValue</span><span class="p">(</span><span class="s1">&#39;seed&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.setSeed"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.setSeed">[docs]</a>    <span class="k">def</span> <span class="nf">setSeed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seed</span><span class="p">,</span> <span class="n">integratorName</span><span class="o">=</span><span class="s2">&quot;gillespie&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Set seed in integrator with integratorName.</span>
<span class="sd">        Defaults to the seed of the gillespie integrator.</span>

<span class="sd">        Raises Error if integrator does not have key &#39;seed&#39;.</span>

<span class="sd">        :param seed: seed to set</span>
<span class="sd">        :param integratorName: name of the integrator for which the seed should be retured</span>
<span class="sd">        :type integratorName: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># there are some issues converting big Python (greater than 4,294,967,295) integers</span>
        <span class="c1"># to C integers on 64 bit machines. If its converted to float before, works around the issue.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setIntegratorSetting</span><span class="p">(</span><span class="n">integratorName</span><span class="o">=</span><span class="n">integratorName</span><span class="p">,</span> <span class="n">settingName</span><span class="o">=</span><span class="s2">&quot;seed&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">seed</span><span class="p">))</span></div>

<div class="viewcode-block" id="ExtendedRoadRunner.gillespie"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.ExtendedRoadRunner.gillespie">[docs]</a>    <span class="k">def</span> <span class="nf">gillespie</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Run a Gillespie stochastic simulation.</span>

<span class="sd">        Sets the integrator to gillespie and performs simulation.</span>
<span class="sd">        ::</span>

<span class="sd">            rr = te.loada (&#39;S1 -&gt; S2; k1*S1; k1 = 0.1; S1 = 40&#39;)</span>
<span class="sd">            # Simulate from time zero to 40 time units</span>
<span class="sd">            result = rr.gillespie (0, 40)</span>
<span class="sd">            # Simulate on a grid with 10 points from start 0 to end time 40</span>
<span class="sd">            rr.reset()</span>
<span class="sd">            result = rr.gillespie (0, 40, 10)</span>
<span class="sd">            # Simulate from time zero to 40 time units using the given selection list</span>
<span class="sd">            # This means that the first column will be time and the second column species S1</span>
<span class="sd">            rr.reset()</span>
<span class="sd">            result = rr.gillespie (0, 40, selections=[&#39;time&#39;, &#39;S1&#39;])</span>
<span class="sd">            # Simulate from time zero to 40 time units, on a grid with 20 points</span>
<span class="sd">            # using the give selection list</span>
<span class="sd">            rr.reset()</span>
<span class="sd">            result = rr.gillespie (0, 40, 20, [&#39;time&#39;, &#39;S1&#39;])</span>
<span class="sd">            rr.plot(result)</span>

<span class="sd">        :param seed: seed for gillespie</span>
<span class="sd">        :type seed: int</span>
<span class="sd">        :param args: parameters for simulate</span>
<span class="sd">        :param kwargs: parameters for simulate</span>
<span class="sd">        :returns: simulation results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setIntegrator</span><span class="p">(</span><span class="s1">&#39;gillespie&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>


<span class="c1"># ---------------------------------------------------------------</span>
<span class="c1"># End of routines</span>
<span class="c1"># ---------------------------------------------------------------</span>
<span class="k">def</span> <span class="nf">_model_function_factory</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Dynamic creation of model functions.</span>

<span class="sd">    :param key: function key, i.e. the name of the function</span>
<span class="sd">    :type key: str</span>
<span class="sd">    :return: function object</span>
<span class="sd">    :rtype: function</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">__call__</span><span class="p">()</span>
    <span class="c1"># set the name</span>
    <span class="n">f</span><span class="o">.</span><span class="n">__name__</span> <span class="o">=</span> <span class="n">key</span>
    <span class="c1"># copy the docstring</span>
    <span class="n">f</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">roadrunner</span><span class="o">.</span><span class="n">ExecutableModel</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">__doc__</span>
    <span class="k">return</span> <span class="n">f</span>

<span class="c1"># Add model functions to ExendedRoadRunner class</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">ExtendedRoadRunner</span><span class="o">.</span><span class="n">_model_functions</span><span class="p">:</span>
    <span class="nb">setattr</span><span class="p">(</span><span class="n">ExtendedRoadRunner</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">_model_function_factory</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>


<span class="c1"># Now we assign the ExtendedRoadRunner to RoadRunner</span>
<div class="viewcode-block" id="RoadRunner"><a class="viewcode-back" href="../../_apidoc/tellurium.html#tellurium.tellurium.RoadRunner">[docs]</a><span class="k">def</span> <span class="nf">RoadRunner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="c1"># return roadrunner.RoadRunner(*args)</span>
    <span class="k">return</span> <span class="n">ExtendedRoadRunner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></div>

<span class="n">roadrunner</span><span class="o">.</span><span class="n">RoadRunner</span> <span class="o">=</span> <span class="n">ExtendedRoadRunner</span>

</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, sys-bio.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>